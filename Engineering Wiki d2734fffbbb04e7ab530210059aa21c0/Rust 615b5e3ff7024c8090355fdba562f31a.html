<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>Rust</title><style>
/* cspell:disable-file */
/* webkit printing magic: print all background colors */
html {
	-webkit-print-color-adjust: exact;
}
* {
	box-sizing: border-box;
	-webkit-print-color-adjust: exact;
}

html,
body {
	margin: 0;
	padding: 0;
}
@media only screen {
	body {
		margin: 2em auto;
		max-width: 900px;
		color: rgb(55, 53, 47);
	}
}

body {
	line-height: 1.5;
	white-space: pre-wrap;
}

a,
a.visited {
	color: inherit;
	text-decoration: underline;
}

.pdf-relative-link-path {
	font-size: 80%;
	color: #444;
}

h1,
h2,
h3 {
	letter-spacing: -0.01em;
	line-height: 1.2;
	font-weight: 600;
	margin-bottom: 0;
}

.page-title {
	font-size: 2.5rem;
	font-weight: 700;
	margin-top: 0;
	margin-bottom: 0.75em;
}

h1 {
	font-size: 1.875rem;
	margin-top: 1.875rem;
}

h2 {
	font-size: 1.5rem;
	margin-top: 1.5rem;
}

h3 {
	font-size: 1.25rem;
	margin-top: 1.25rem;
}

.source {
	border: 1px solid #ddd;
	border-radius: 3px;
	padding: 1.5em;
	word-break: break-all;
}

.callout {
	border-radius: 3px;
	padding: 1rem;
}

figure {
	margin: 1.25em 0;
	page-break-inside: avoid;
}

figcaption {
	opacity: 0.5;
	font-size: 85%;
	margin-top: 0.5em;
}

mark {
	background-color: transparent;
}

.indented {
	padding-left: 1.5em;
}

hr {
	background: transparent;
	display: block;
	width: 100%;
	height: 1px;
	visibility: visible;
	border: none;
	border-bottom: 1px solid rgba(55, 53, 47, 0.09);
}

img {
	max-width: 100%;
}

@media only print {
	img {
		max-height: 100vh;
		object-fit: contain;
	}
}

@page {
	margin: 1in;
}

.collection-content {
	font-size: 0.875rem;
}

.column-list {
	display: flex;
	justify-content: space-between;
}

.column {
	padding: 0 1em;
}

.column:first-child {
	padding-left: 0;
}

.column:last-child {
	padding-right: 0;
}

.table_of_contents-item {
	display: block;
	font-size: 0.875rem;
	line-height: 1.3;
	padding: 0.125rem;
}

.table_of_contents-indent-1 {
	margin-left: 1.5rem;
}

.table_of_contents-indent-2 {
	margin-left: 3rem;
}

.table_of_contents-indent-3 {
	margin-left: 4.5rem;
}

.table_of_contents-link {
	text-decoration: none;
	opacity: 0.7;
	border-bottom: 1px solid rgba(55, 53, 47, 0.18);
}

table,
th,
td {
	border: 1px solid rgba(55, 53, 47, 0.09);
	border-collapse: collapse;
}

table {
	border-left: none;
	border-right: none;
}

th,
td {
	font-weight: normal;
	padding: 0.25em 0.5em;
	line-height: 1.5;
	min-height: 1.5em;
	text-align: left;
}

th {
	color: rgba(55, 53, 47, 0.6);
}

ol,
ul {
	margin: 0;
	margin-block-start: 0.6em;
	margin-block-end: 0.6em;
}

li > ol:first-child,
li > ul:first-child {
	margin-block-start: 0.6em;
}

ul > li {
	list-style: disc;
}

ul.to-do-list {
	text-indent: -1.7em;
}

ul.to-do-list > li {
	list-style: none;
}

.to-do-children-checked {
	text-decoration: line-through;
	opacity: 0.375;
}

ul.toggle > li {
	list-style: none;
}

ul {
	padding-inline-start: 1.7em;
}

ul > li {
	padding-left: 0.1em;
}

ol {
	padding-inline-start: 1.6em;
}

ol > li {
	padding-left: 0.2em;
}

.mono ol {
	padding-inline-start: 2em;
}

.mono ol > li {
	text-indent: -0.4em;
}

.toggle {
	padding-inline-start: 0em;
	list-style-type: none;
}

/* Indent toggle children */
.toggle > li > details {
	padding-left: 1.7em;
}

.toggle > li > details > summary {
	margin-left: -1.1em;
}

.selected-value {
	display: inline-block;
	padding: 0 0.5em;
	background: rgba(206, 205, 202, 0.5);
	border-radius: 3px;
	margin-right: 0.5em;
	margin-top: 0.3em;
	margin-bottom: 0.3em;
	white-space: nowrap;
}

.collection-title {
	display: inline-block;
	margin-right: 1em;
}

.simple-table {
	margin-top: 1em;
	font-size: 0.875rem;
	empty-cells: show;
}
.simple-table td {
	height: 29px;
	min-width: 120px;
}

.simple-table th {
	height: 29px;
	min-width: 120px;
}

.simple-table-header-color {
	background: rgb(247, 246, 243);
	color: black;
}
.simple-table-header {
	font-weight: 500;
}

time {
	opacity: 0.5;
}

.icon {
	display: inline-block;
	max-width: 1.2em;
	max-height: 1.2em;
	text-decoration: none;
	vertical-align: text-bottom;
	margin-right: 0.5em;
}

img.icon {
	border-radius: 3px;
}

.user-icon {
	width: 1.5em;
	height: 1.5em;
	border-radius: 100%;
	margin-right: 0.5rem;
}

.user-icon-inner {
	font-size: 0.8em;
}

.text-icon {
	border: 1px solid #000;
	text-align: center;
}

.page-cover-image {
	display: block;
	object-fit: cover;
	width: 100%;
	max-height: 30vh;
}

.page-header-icon {
	font-size: 3rem;
	margin-bottom: 1rem;
}

.page-header-icon-with-cover {
	margin-top: -0.72em;
	margin-left: 0.07em;
}

.page-header-icon img {
	border-radius: 3px;
}

.link-to-page {
	margin: 1em 0;
	padding: 0;
	border: none;
	font-weight: 500;
}

p > .user {
	opacity: 0.5;
}

td > .user,
td > time {
	white-space: nowrap;
}

input[type="checkbox"] {
	transform: scale(1.5);
	margin-right: 0.6em;
	vertical-align: middle;
}

p {
	margin-top: 0.5em;
	margin-bottom: 0.5em;
}

.image {
	border: none;
	margin: 1.5em 0;
	padding: 0;
	border-radius: 0;
	text-align: center;
}

.code,
code {
	background: rgba(135, 131, 120, 0.15);
	border-radius: 3px;
	padding: 0.2em 0.4em;
	border-radius: 3px;
	font-size: 85%;
	tab-size: 2;
}

code {
	color: #eb5757;
}

.code {
	padding: 1.5em 1em;
}

.code-wrap {
	white-space: pre-wrap;
	word-break: break-all;
}

.code > code {
	background: none;
	padding: 0;
	font-size: 100%;
	color: inherit;
}

blockquote {
	font-size: 1.25em;
	margin: 1em 0;
	padding-left: 1em;
	border-left: 3px solid rgb(55, 53, 47);
}

.bookmark {
	text-decoration: none;
	max-height: 8em;
	padding: 0;
	display: flex;
	width: 100%;
	align-items: stretch;
}

.bookmark-title {
	font-size: 0.85em;
	overflow: hidden;
	text-overflow: ellipsis;
	height: 1.75em;
	white-space: nowrap;
}

.bookmark-text {
	display: flex;
	flex-direction: column;
}

.bookmark-info {
	flex: 4 1 180px;
	padding: 12px 14px 14px;
	display: flex;
	flex-direction: column;
	justify-content: space-between;
}

.bookmark-image {
	width: 33%;
	flex: 1 1 180px;
	display: block;
	position: relative;
	object-fit: cover;
	border-radius: 1px;
}

.bookmark-description {
	color: rgba(55, 53, 47, 0.6);
	font-size: 0.75em;
	overflow: hidden;
	max-height: 4.5em;
	word-break: break-word;
}

.bookmark-href {
	font-size: 0.75em;
	margin-top: 0.25em;
}

.sans { font-family: ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol"; }
.code { font-family: "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace; }
.serif { font-family: Lyon-Text, Georgia, ui-serif, serif; }
.mono { font-family: iawriter-mono, Nitti, Menlo, Courier, monospace; }
.pdf .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK JP'; }
.pdf:lang(zh-CN) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK SC'; }
.pdf:lang(zh-TW) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK TC'; }
.pdf:lang(ko-KR) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK KR'; }
.pdf .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.pdf .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK JP'; }
.pdf:lang(zh-CN) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK SC'; }
.pdf:lang(zh-TW) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK TC'; }
.pdf:lang(ko-KR) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK KR'; }
.pdf .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.highlight-default {
	color: rgba(55, 53, 47, 1);
}
.highlight-gray {
	color: rgba(120, 119, 116, 1);
	fill: rgba(120, 119, 116, 1);
}
.highlight-brown {
	color: rgba(159, 107, 83, 1);
	fill: rgba(159, 107, 83, 1);
}
.highlight-orange {
	color: rgba(217, 115, 13, 1);
	fill: rgba(217, 115, 13, 1);
}
.highlight-yellow {
	color: rgba(203, 145, 47, 1);
	fill: rgba(203, 145, 47, 1);
}
.highlight-teal {
	color: rgba(68, 131, 97, 1);
	fill: rgba(68, 131, 97, 1);
}
.highlight-blue {
	color: rgba(51, 126, 169, 1);
	fill: rgba(51, 126, 169, 1);
}
.highlight-purple {
	color: rgba(144, 101, 176, 1);
	fill: rgba(144, 101, 176, 1);
}
.highlight-pink {
	color: rgba(193, 76, 138, 1);
	fill: rgba(193, 76, 138, 1);
}
.highlight-red {
	color: rgba(212, 76, 71, 1);
	fill: rgba(212, 76, 71, 1);
}
.highlight-gray_background {
	background: rgba(241, 241, 239, 1);
}
.highlight-brown_background {
	background: rgba(244, 238, 238, 1);
}
.highlight-orange_background {
	background: rgba(251, 236, 221, 1);
}
.highlight-yellow_background {
	background: rgba(251, 243, 219, 1);
}
.highlight-teal_background {
	background: rgba(237, 243, 236, 1);
}
.highlight-blue_background {
	background: rgba(231, 243, 248, 1);
}
.highlight-purple_background {
	background: rgba(244, 240, 247, 0.8);
}
.highlight-pink_background {
	background: rgba(249, 238, 243, 0.8);
}
.highlight-red_background {
	background: rgba(253, 235, 236, 1);
}
.block-color-default {
	color: inherit;
	fill: inherit;
}
.block-color-gray {
	color: rgba(120, 119, 116, 1);
	fill: rgba(120, 119, 116, 1);
}
.block-color-brown {
	color: rgba(159, 107, 83, 1);
	fill: rgba(159, 107, 83, 1);
}
.block-color-orange {
	color: rgba(217, 115, 13, 1);
	fill: rgba(217, 115, 13, 1);
}
.block-color-yellow {
	color: rgba(203, 145, 47, 1);
	fill: rgba(203, 145, 47, 1);
}
.block-color-teal {
	color: rgba(68, 131, 97, 1);
	fill: rgba(68, 131, 97, 1);
}
.block-color-blue {
	color: rgba(51, 126, 169, 1);
	fill: rgba(51, 126, 169, 1);
}
.block-color-purple {
	color: rgba(144, 101, 176, 1);
	fill: rgba(144, 101, 176, 1);
}
.block-color-pink {
	color: rgba(193, 76, 138, 1);
	fill: rgba(193, 76, 138, 1);
}
.block-color-red {
	color: rgba(212, 76, 71, 1);
	fill: rgba(212, 76, 71, 1);
}
.block-color-gray_background {
	background: rgba(241, 241, 239, 1);
}
.block-color-brown_background {
	background: rgba(244, 238, 238, 1);
}
.block-color-orange_background {
	background: rgba(251, 236, 221, 1);
}
.block-color-yellow_background {
	background: rgba(251, 243, 219, 1);
}
.block-color-teal_background {
	background: rgba(237, 243, 236, 1);
}
.block-color-blue_background {
	background: rgba(231, 243, 248, 1);
}
.block-color-purple_background {
	background: rgba(244, 240, 247, 0.8);
}
.block-color-pink_background {
	background: rgba(249, 238, 243, 0.8);
}
.block-color-red_background {
	background: rgba(253, 235, 236, 1);
}
.select-value-color-pink { background-color: rgba(245, 224, 233, 1); }
.select-value-color-purple { background-color: rgba(232, 222, 238, 1); }
.select-value-color-green { background-color: rgba(219, 237, 219, 1); }
.select-value-color-gray { background-color: rgba(227, 226, 224, 1); }
.select-value-color-opaquegray { background-color: rgba(255, 255, 255, 0.0375); }
.select-value-color-orange { background-color: rgba(250, 222, 201, 1); }
.select-value-color-brown { background-color: rgba(238, 224, 218, 1); }
.select-value-color-red { background-color: rgba(255, 226, 221, 1); }
.select-value-color-yellow { background-color: rgba(253, 236, 200, 1); }
.select-value-color-blue { background-color: rgba(211, 229, 239, 1); }

.checkbox {
	display: inline-flex;
	vertical-align: text-bottom;
	width: 16;
	height: 16;
	background-size: 16px;
	margin-left: 2px;
	margin-right: 5px;
}

.checkbox-on {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20width%3D%2216%22%20height%3D%2216%22%20fill%3D%22%2358A9D7%22%2F%3E%0A%3Cpath%20d%3D%22M6.71429%2012.2852L14%204.9995L12.7143%203.71436L6.71429%209.71378L3.28571%206.2831L2%207.57092L6.71429%2012.2852Z%22%20fill%3D%22white%22%2F%3E%0A%3C%2Fsvg%3E");
}

.checkbox-off {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20x%3D%220.75%22%20y%3D%220.75%22%20width%3D%2214.5%22%20height%3D%2214.5%22%20fill%3D%22white%22%20stroke%3D%22%2336352F%22%20stroke-width%3D%221.5%22%2F%3E%0A%3C%2Fsvg%3E");
}
	
</style></head><body><article id="615b5e3f-f702-4c80-9035-5fdba562f31a" class="page sans"><header><div class="page-header-icon undefined"><img class="icon" src="Rust%20615b5e3ff7024c8090355fdba562f31a/rustIcon.png"/></div><h1 class="page-title">Rust</h1></header><div class="page-body"><figure class="block-color-gray_background callout" style="white-space:pre-wrap;display:flex" id="7392d7ae-86f7-4d19-95b1-23325f76837d"><div style="font-size:1.5em"><span class="icon">💡</span></div><div style="width:100%">This page documents the learning of Rust programming language</div></figure><nav id="0273d6af-791f-422a-98c5-08e47ba0dc07" class="block-color-gray table_of_contents"><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#b12351d5-aa63-45c2-ab55-0b29e2fbe308">📙Read the book</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#08d8c790-fe2d-40c0-b54c-cb17e31a658d">Rust编程语言教学</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#f031f96b-c9fb-4c08-9f8e-7f8b56114179">Rust死灵书</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#9abf51ec-a3e4-4e79-b487-f920aa1095ee">Rust内存数据结构可视化</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#cb5b1fa6-cfdd-49fb-939a-d123375dbb2b">C++ → Rust</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#59b2a1d4-dc03-4b09-842f-a61de4bc4221">Understanding Ownership</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#f5eebccb-80e9-425d-a9f3-df902a435373">Rust OpenGL</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#3b88fba5-485d-4673-8b3d-30d6838be437">============================================================================</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#6a787024-9663-46cc-9afe-18612631a729">&amp; 引用 </a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#bd65782b-599f-4f27-9c01-34c633867d10">可变引用</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#d9518ae4-3053-42d4-aafa-0cadf5184b1c">发生数据竞争（多个可变引用）</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#7a86e1ca-dbbd-41da-910d-317b883f6a5f">构造允许的多个<mark class="highlight-red">可变</mark>引用</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#420b8c3a-e5df-4a6e-9c6a-be7865656cba">保证悬空引用不会发生</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#a17f91b2-3b3f-40ef-b5df-2294f4d7f559">String 和 &amp;str</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#750445d5-932f-4fc0-8e7e-4804a6374240">Option</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#16b32365-eb65-44de-9f00-4f456fd92278">match</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#eaa78c33-8f7c-429d-aa5d-249cd8dcbe29">If let</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#2e756491-c290-4f0f-928a-8dd390676726">Package Crate Module</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#b48df502-8a6c-414b-a4b1-ba4e141fe5c9">Package and Crate</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#ade612f6-795e-40c8-abc5-1a18c6ac9de8">Crate惯例</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#5d8044e6-82da-4e37-a4c2-51fc5a75f9cb">Crate作用</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#b52d6e38-0894-40a6-9ed7-3ca44cadfc57">Module</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#56b3ab02-2c42-44ed-918f-f8e8abc3607e">Variable shadowing</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#ee434544-5241-4dac-bbd4-e88b359ebabe">泛型</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#31d06998-ff4e-42bc-b93e-2f92eaf8be44">函数中的泛型</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#819b3dba-707c-4459-b15e-a02c27c4b932">结构体中的泛型</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#68cda05a-45ae-439d-aac8-f455717ec59a">测试</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#b637dacf-96c6-4d3b-b6e5-519630824d7c">assert!</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#2d70f605-ec98-4bbd-97d6-76973d34ce88">should_panic</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#1e144cf7-39d8-4200-96fa-538cf4be0781">测试特定恐慌</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#7222bb96-c1bb-4a1f-b149-57e7d29d1e07">使用Result&lt;T, E&gt;测试</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#bdf528d5-685d-4dbf-8dbb-7c555540835c">并行运行测试</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#1daeb1ef-eff8-4330-bda5-22b39bb64b0b">显式函数输出</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#40738570-baa7-4c48-870b-e6812e7d7b6d">按名称运行</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#f7ffd774-b451-4941-af47-d47c1fe471c5">忽略某些测试，运行剩余测试</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#7c88b9c3-8ffc-424b-af32-ef4ec5e8bba4">测试单元</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#81d99e54-14b6-4e38-984d-7329cb96ad6f">集成测试</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#4a65b855-40ea-4c70-9277-29dffd24657d">test目录</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#62f723ab-cdd3-4d92-93b7-2600d173fbcb">tests目录</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#8f981851-e742-4a2d-9696-015216895516">Error handling 错误处理</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#bef74fd7-cadb-4b60-ab6b-aabc6bd8ab04">Rustlings error handling习题的答案</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#d7d384c7-99b4-4d3a-8d70-f0d039963bdf">Result</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#a53e34e9-2f3c-4103-bdd8-45ce5cd6f03e">Unwrap</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#041e18a0-1331-4fed-8b2b-5450b6d14347">?(question mark)</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#bf1f3bab-edd9-4d75-a959-a7803683626b">Boxing errors</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#b37ba872-de8e-40ea-ad17-a795d9c5ad20">dyn</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#2654d770-1087-43bf-8ace-a69d8e4a1b41">closure 闭包</a></div></nav><h1 id="b12351d5-aa63-45c2-ab55-0b29e2fbe308" class="">📙Read the book</h1><p id="73e6e362-74ba-4103-a228-5108bcc913bf" class="">The Rust Programming Language (Covers Rust 2018) (Steve Klabnik, Carol Nichols) </p><p id="9ab3dc80-5ba9-40e3-a137-f6fff5898ae7" class=""><a href="Rust%20615b5e3ff7024c8090355fdba562f31a.html">Rust 程序设计语言 中文版</a> </p><figure id="07bc6434-1c29-40b5-acaa-b61c6f5d98ee" class="image"><a href="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled.png"><img style="width:120px" src="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled.png"/></a></figure><h1 id="08d8c790-fe2d-40c0-b54c-cb17e31a658d" class="">Rust编程语言教学</h1><figure id="3166876e-5a28-4718-9c7d-a781f313aca8"><a href="https://rustwiki.org/zh-CN/book/" class="bookmark source"><div class="bookmark-info"><div class="bookmark-text"><div class="bookmark-title">Rust 程序设计语言 中文版</div><div class="bookmark-description">由 Steve Klabnik 和 Carol Nichols，以及来自 Rust 社区贡献者撰写 中文翻译注（Chinese translation of the The Rust Programming Language ）： 👉 查看更多 Rust 官方文档中英文双语教程，本站还提供了 Rust 标准库中文版。 本站翻译已参照最新的 Rust 1.58.0 版及开发版进行调整，这是目前网上最新的中文版本，最后更新时间 2022 年 2 月 6 日。 《Rust 程序设计语言》(The Rust Programming Language 中文版) 翻译自 The Rust Programming Language，查看此书的 GitHub 翻译项目和源码。 《Rust 程序设计语言》中文出版书名为《Rust 权威指南》，参见&quot;为什么 The</div></div><div class="bookmark-href"><img src="https://rustwiki.org/zh-CN/book/favicon.png" class="icon bookmark-icon"/>https://rustwiki.org/zh-CN/book/</div></div></a></figure><figure id="07fcdb4c-da0e-4264-9ed2-7eca8e14b695"><a href="https://www.bilibili.com/video/BV1hp4y1k7SV?spm_id_from=333.1007.top_right_bar_window_custom_collection.content.click&amp;vd_source=52494d4c4a0e31a5cc971d0ae1d4bbb1" class="bookmark source"><div class="bookmark-info"><div class="bookmark-text"><div class="bookmark-title">Rust编程语言入门教程（Rust语言/Rust权威指南配套）【已完结】_哔哩哔哩_bilibili</div><div class="bookmark-description">Rust语言入门视频教程，Rust编程入门视频教程。配套教材：《The Rust Programming Language》或中文版《Rust权威指南》。视频下载地址：https://pan.baidu.com/s/1If1newPwZCrkFmy8W4AYrA?pwd=e7vp 提取码: e7vp</div></div><div class="bookmark-href"><img src="https://www.bilibili.com/favicon.ico" class="icon bookmark-icon"/>https://www.bilibili.com/video/BV1hp4y1k7SV?spm_id_from=333.1007.top_right_bar_window_custom_collection.content.click&amp;vd_source=52494d4c4a0e31a5cc971d0ae1d4bbb1</div></div><img src="http://i0.hdslb.com/bfs/archive/3bcd51d8e8035931e282079a7a256ec7e1e8e80d.jpg" class="bookmark-image"/></a></figure><figure id="c04a4971-5f1b-4ce6-bfc8-87128c1f5a4f"><a href="https://www.youtube.com/watch?v=ygL_xcavzQ4" class="bookmark source"><div class="bookmark-info"><div class="bookmark-text"><div class="bookmark-title">Rust Tutorial Full Course</div><div class="bookmark-description">Rust is the language of choice for those looking for high performance, memory safety and all the tools needed to write error free code with ease. In this tut...</div></div><div class="bookmark-href"><img src="https://www.youtube.com/s/desktop/54c586d4/img/favicon.ico" class="icon bookmark-icon"/>https://www.youtube.com/watch?v=ygL_xcavzQ4</div></div><img src="https://i.ytimg.com/vi/ygL_xcavzQ4/hqdefault.jpg" class="bookmark-image"/></a></figure><figure id="8c9eaa6f-0c0f-497e-83ed-4d6749e4ccea"><a href="https://rustwiki.org/zh-CN/rust-by-example/index.html" class="bookmark source"><div class="bookmark-info"><div class="bookmark-text"><div class="bookmark-title">通过例子学 Rust 中文版</div><div class="bookmark-description">通过例子学 Rust, Rust By Example 中文版，RBE 中文版，本书通过详细的可运行的 Rust 程序来讲解 Rust 语言有关的知识点，通俗易懂，是 Rust 初学者必备的学习参考书，同时也能作为 Rust 工程师日常工作中快速查找知识点的必备查询手册。</div></div><div class="bookmark-href"><img src="https://rustwiki.org/zh-CN/rust-by-example/favicon.png" class="icon bookmark-icon"/>https://rustwiki.org/zh-CN/rust-by-example/index.html</div></div></a></figure><figure id="93e48eed-345f-4b91-8219-9483bcef47e1"><a href="https://rustwiki.org/zh-CN/std/" class="bookmark source"><div class="bookmark-info"><div class="bookmark-text"><div class="bookmark-title">std - Rust</div><div class="bookmark-description">Rust 标准库是可移植 Rust 软件的基础，这是一组针对 更广泛的 Rust 生态系统 的最小且经过实战测试的共享抽象。 它提供了核心类型，例如 和 ，库定义的对 语言原语 的操作， 标准库宏， I/O 和 多线程，以及许多 其他 东西。 默认情况下， std 可用于所有 Rust crates。因此，可以通过 语句使用路径 std 来访问标准库，就像在 中一样。 如果您已经知道要查找的内容的名称，最快的查找方法是使用页面顶部的 搜索栏 。 否则，您可能想跳转到以下有用的部分之一： 如果这是您第一次来，那么标准库的文档可以被随意的阅读。点击有趣的东西通常会把您带到有趣的地方。 尽管如此，您还是不想错过一些重要的内容，因此请继续阅读标准库及其文档！ 一旦您熟悉了标准库的内容，您可能会发现冗长的描述会使人分心。在开发阶段，您可能需要按页面顶部附近的 [-] 按钮，将其折叠为更易于阅读的视图。 当您看到 [-] 按钮的时候，也请注意 [src] 按钮。Rust 的 API 文档附带了源代码，我们鼓励您阅读它。 标准库的资源通常是高质量的，通常可以启发人们对幕后的了解。 首先，Rust 标准库分为多个重点 模块 ，所有的这些模块都会在本页下方列出。这些模块是所有</div></div><div class="bookmark-href">https://rustwiki.org/zh-CN/std/</div></div><img src="https://rustwiki.org/zh-CN/rust-logo1.58.0.png" class="bookmark-image"/></a></figure><h2 id="f031f96b-c9fb-4c08-9f8e-7f8b56114179" class="">Rust死灵书</h2><figure id="da90dd32-f9fd-4680-97af-122f28c696c7"><a href="https://www.bilibili.com/video/BV1xp4y1a78D?spm_id_from=333.1007.top_right_bar_window_custom_collection.content.click&amp;vd_source=52494d4c4a0e31a5cc971d0ae1d4bbb1" class="bookmark source"><div class="bookmark-info"><div class="bookmark-text"><div class="bookmark-title">Rust死灵书学习_哔哩哔哩_bilibili</div></div><div class="bookmark-href"><img src="https://www.bilibili.com/favicon.ico" class="icon bookmark-icon"/>https://www.bilibili.com/video/BV1xp4y1a78D?spm_id_from=333.1007.top_right_bar_window_custom_collection.content.click&amp;vd_source=52494d4c4a0e31a5cc971d0ae1d4bbb1</div></div><img src="http://i0.hdslb.com/bfs/archive/8a608cf766e6702452edb1ce626303f89a17c21a.jpg" class="bookmark-image"/></a></figure><figure id="b0a6c752-6de9-436a-a902-eea1c08a553a"><a href="https://nomicon.purewhite.io/" class="bookmark source"><div class="bookmark-info"><div class="bookmark-text"><div class="bookmark-title">Rust 秘典（死灵书）</div><div class="bookmark-description">警告。 这本书是不完整的。 记录所有内容和重写过时的部分需要一段时间。 请参见 issue tracker 以检查哪些内容缺失/过时，如果有任何错误或想法仍未被报告，欢迎随时提一个新 Issue。 译者的话：首先，限于译者自身姿势水平，翻译有可能无法做到完全信达雅，并且有一些专业术语不知道如何翻译到中文，在这里先向大家道歉，请多包涵。 不过，译者保证所有翻译的内容都是译者阅读并调整过多次的，并且译者会努力将内容调整到满足 能看懂 的要求，并且做到不遗漏原文内容。 如果大家对于翻译有更好的建议或者想法，欢迎直接 PR~ 目前翻译基于 commit：10d40c59a581c66d8ecd29ad18d410bf97ed524d，基于时间：2022/5/7 Q：为什么不基于之前已有的中文版进行改进？ A：因为翻译成中文版后，很难再回过头去看和现在的英文版原文到底差了啥，所以还不如完全重新翻译一遍。 Q：那会不会有一天你的这个版本也过期了？ A：希望没有那一天。我 watch 了英文原版的所有 pr，如果有变更（希望）能及时更新。当然，也欢迎大家一起贡献 PR。 这些知识是&quot;按原样&quot;提供的，没有任何形式的明示或暗示的保证，包括但不限于释放难以描述的恐怖，粉碎你的心灵，让你的思想漂流在不可知的无限宇宙中。 Rust 秘典挖掘了你在编写不安全 Rust 程序时需要了解的所有可怕的细节。 如果你希望在编写 Rust 程序的过程中获得长久而快乐的职业生涯，你应该现在回头，忘记你曾经看过这本书。 它没有必要。 然而，如果你打算编写不安全代码--或者只是想深入了解语言的内涵--这本书包含了很多有用的信息。 与 The Rust Programming Language 不同的是，我们将假设你有相当多的前期知识。 特别是，你应该对基本的系统编程和 Rust 非常熟悉。 如果你对这些主题感到困惑，你应该考虑先阅读 The Book。 也就是说，我们不会假定你已经读过了，而且我们会注意偶尔在适当的时候对基础知识进行复习。 如果你想的话，你可以直接跳过 The Book 来看这本书：但你需要知道我们不会从头到尾地详细解释一切。 本书主要是作为 The Reference 的高级配套读物而存在。 《The Reference》的存在是为了详细说明语言的每一部分的语法和语义，而《Rust 秘典》的存在是为了描述如何将这些部分结合起来使用，以及你在这样做时将会遇到的问题。 《The Reference》会告诉你引用、析构器和 unwind 的语法和语义，但它不会告诉你如何将它们结合起来导致异常安全问题，或如何处理这些问题。 需要注意的是，我们没有很好地同步 The Rustnomicon 和 The Reference，所以它们可能有重复的内容。 一般来说，如果这两个文档有分歧，应该认为《The Reference》是正确的（它还没有被认为是规范性的，只是维护得更好）。 本书范围内的主题包括：（不）安全的含义、语言和标准库提供的不安全基础、用这些不安全基础创建安全抽象的技术、子类型和可变性（variance）、异常安全（恐慌/unwind 安全性）、与未初始化的内存相关的工作、类型转换、并发、与其他语言的互操作（FFI）、优化技巧、如何构建低级到编译器/操作系统/硬件的基元（primitives）、如何 不使内存模型程序员生气、如何 使 内存模型程序员生气、以及更多。 Rust 秘典不是一个详尽描述标准库中每一个 API 的语义和保证的地方，也不是一个详尽描述 Rust 的每一个特性的地方。 除非另有说明，本书中的 Rust 代码使用 Rust 2018 版。</div></div><div class="bookmark-href"><img src="https://nomicon.purewhite.io/favicon.png" class="icon bookmark-icon"/>https://nomicon.purewhite.io/</div></div></a></figure><figure id="6b5ad079-8c5c-4a9b-8c03-7f8a5e79fd47"><a href="https://doc.rust-lang.org/nomicon/" class="bookmark source"><div class="bookmark-info"><div class="bookmark-text"><div class="bookmark-title">The Rustonomicon</div><div class="bookmark-description">Warning: This book is incomplete. Documenting everything and rewriting outdated parts take a while. See the issue tracker to check what&#x27;s missing/outdated, and if there are any mistakes or ideas that haven&#x27;t been reported, feel free to open a new issue there.</div></div><div class="bookmark-href"><img src="https://doc.rust-lang.org/nomicon/favicon.png" class="icon bookmark-icon"/>https://doc.rust-lang.org/nomicon/</div></div></a></figure><h2 id="9abf51ec-a3e4-4e79-b487-f920aa1095ee" class="">Rust内存数据结构可视化</h2><figure id="97af1569-f2be-4764-8542-0db3f5e1e3c8"><a href="https://www.bilibili.com/video/BV1KT4y167f1?spm_id_from=333.1007.top_right_bar_window_custom_collection.content.click&amp;vd_source=52494d4c4a0e31a5cc971d0ae1d4bbb1" class="bookmark source"><div class="bookmark-info"><div class="bookmark-text"><div class="bookmark-title">可视化 Rust 各数据结构的内存布局_哔哩哔哩_bilibili</div><div class="bookmark-description">https://www.youtube.com/watch?v=rDoqT-a6UFg本视频已经获得原作者翻译许可。由于译者个人能力有限，如有翻译错误，希望观众加以指正。原视频标题: Visualizing memory layout of Rust&amp;#39;s data types原视频链接: https://www.youtube.com/watch?v=rDoqT-a6UFg[Markdow</div></div><div class="bookmark-href"><img src="https://www.bilibili.com/favicon.ico" class="icon bookmark-icon"/>https://www.bilibili.com/video/BV1KT4y167f1?spm_id_from=333.1007.top_right_bar_window_custom_collection.content.click&amp;vd_source=52494d4c4a0e31a5cc971d0ae1d4bbb1</div></div><img src="http://i0.hdslb.com/bfs/archive/1b7d5aba6444481f580c3713093ee5785747fc0c.jpg" class="bookmark-image"/></a></figure><h1 id="cb5b1fa6-cfdd-49fb-939a-d123375dbb2b" class="">C++ → Rust</h1><figure id="8f35e709-cc6f-4c07-adae-f5e914127f58"><a href="https://www.youtube.com/watch?v=IPmRDS0OSxM" class="bookmark source"><div class="bookmark-info"><div class="bookmark-text"><div class="bookmark-title">A Firehose of Rust, for busy people who know some C++</div><div class="bookmark-description">Slides: https://jacko.io/firehose_of_rustThe slower version of this talk (2h32m): https://youtu.be/FSyfZVuD32YContents:0:00:00 introduction0:04:03 references...</div></div><div class="bookmark-href"><img src="https://www.youtube.com/s/desktop/d92f5e6b/img/favicon.ico" class="icon bookmark-icon"/>https://www.youtube.com/watch?v=IPmRDS0OSxM</div></div><img src="https://i.ytimg.com/vi/IPmRDS0OSxM/hqdefault.jpg" class="bookmark-image"/></a></figure><h1 id="59b2a1d4-dc03-4b09-842f-a61de4bc4221" class="">Understanding Ownership</h1><figure id="c2ce12b9-3104-4510-9b50-e659940bd86c"><a href="https://www.youtube.com/watch?v=lQ7XF-6HYGc&amp;feature=emb_imp_woyt" class="bookmark source"><div class="bookmark-info"><div class="bookmark-text"><div class="bookmark-title">Rust Ownership and Borrowing</div><div class="bookmark-description">An in-depth discussion about Rust Ownership and Borrowing, including memory management concepts.This Rust programming language tutorial series is aimed at ea...</div></div><div class="bookmark-href"><img src="https://www.youtube.com/s/desktop/54c586d4/img/favicon.ico" class="icon bookmark-icon"/>https://www.youtube.com/watch?v=lQ7XF-6HYGc&amp;feature=emb_imp_woyt</div></div><img src="https://i.ytimg.com/vi/lQ7XF-6HYGc/hqdefault.jpg" class="bookmark-image"/></a></figure><h1 id="f5eebccb-80e9-425d-a9f3-df902a435373" class="">Rust OpenGL</h1><figure id="918196fb-5ee2-4542-a96d-02eae0f46952"><a href="https://rust-tutorials.github.io/learn-opengl/basics/index.html" class="bookmark source"><div class="bookmark-info"><div class="bookmark-text"><div class="bookmark-title">Learn OpenGL Rust</div><div class="bookmark-description">TODO: maybe some of this can go into the Introduction? whatever. We&#x27;ll be using OpenGL 3.3. The latest version is 4.6, but we&#x27;ll still be using 3.3. The main reason for this is because if we take a quick look at Mac&#x27;s supported OpenGL versions we can see that they support 3.3 on older stuff and 4.1 on newer stuff.</div></div><div class="bookmark-href"><img src="https://rust-tutorials.github.io/learn-opengl/favicon.png" class="icon bookmark-icon"/>https://rust-tutorials.github.io/learn-opengl/basics/index.html</div></div></a></figure><figure id="3720029b-c9e1-4a73-b610-f7a57cc1a5a6"><a href="https://www.youtube.com/watch?v=KEQIWqSq42k" class="bookmark source"><div class="bookmark-info"><div class="bookmark-text"><div class="bookmark-title">I tried learning OpenGL in 7 days - using Rust</div><div class="bookmark-description">Graphics programming is so cool!I managed to make a water shader, load 3d models, create a beautiful transition shader in just 7 days using OpenGL and the Ru...</div></div><div class="bookmark-href"><img src="https://www.youtube.com/s/desktop/54c586d4/img/favicon.ico" class="icon bookmark-icon"/>https://www.youtube.com/watch?v=KEQIWqSq42k</div></div><img src="https://i.ytimg.com/vi/KEQIWqSq42k/hqdefault.jpg" class="bookmark-image"/></a></figure><hr id="0b2ca4a0-7f25-4456-91f5-b136e3d58297"/><h1 id="3b88fba5-485d-4673-8b3d-30d6838be437" class="">============================================================================</h1><h1 id="6a787024-9663-46cc-9afe-18612631a729" class="">&amp; 引用 </h1><h2 id="bd65782b-599f-4f27-9c01-34c633867d10" class="">可变引用</h2><figure id="f0967ad2-2064-4fcc-868c-fd743eaef17c" class="image"><a href="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%201.png"><img style="width:528px" src="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%201.png"/></a></figure><figure id="e6da9019-e45b-4597-8421-498c9d657abd" class="image"><a href="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%202.png"><img style="width:528px" src="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%202.png"/></a></figure><h2 id="d9518ae4-3053-42d4-aafa-0cadf5184b1c" class="">发生数据竞争（多个可变引用）</h2><figure id="0dc3eb17-4b90-4ae7-8156-5741b6169c7c" class="image"><a href="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%203.png"><img style="width:528px" src="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%203.png"/></a></figure><h3 id="7a86e1ca-dbbd-41da-910d-317b883f6a5f" class="">构造允许的多个<mark class="highlight-red">可变</mark>引用</h3><p id="0401e04c-8f1d-41c8-b6cf-335bb0ee57dc" class="">s1出了作用域就会失效了</p><figure id="99541dab-2ec9-429c-a414-3923f4fb5ce2" class="image"><a href="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%204.png"><img style="width:528px" src="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%204.png"/></a></figure><h2 id="420b8c3a-e5df-4a6e-9c6a-be7865656cba" class="">保证悬空引用不会发生</h2><figure id="ad80ae7c-45d6-427a-ad8f-7cad94d6d29a" class="image"><a href="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%205.png"><img style="width:576px" src="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%205.png"/></a></figure><p id="053f4c5f-fc38-422d-866e-6dbd61f50937" class="">
</p><h1 id="a17f91b2-3b3f-40ef-b5df-2294f4d7f559" class="">String 和 &amp;str</h1><pre id="21c5a845-3685-4f64-951a-cc155b9c7dfd" class="code code-wrap"><code>fn main() {
    string_slice(&quot;blue&quot;);
    string_slice(&amp;String::from(&quot;abc&quot;)[0..1]);
    string_slice(&quot;  hello there &quot;.trim());
    
    string(&quot;red&quot;.to_string());
    string(String::from(&quot;hi&quot;));
    string(&quot;rust is fun!&quot;.to_owned()); 
		// to_owned() 
		// String concatenation appends the string on the right to the string on the
		// left and may require reallocation. This requires ownership of the string
		// on the left. If something should be added to a string literal, move the
		// literal to the heap by allocating it with `to_owned()` like in
		// `&quot;Your text&quot;.to_owned()`.
    string(&quot;nice weather&quot;.into());
    string(format!(&quot;Interpolation {}&quot;, &quot;Station&quot;));
    string(&quot;Happy Monday!&quot;.to_string().replace(&quot;Mon&quot;, &quot;Tues&quot;));
    string(&quot;mY sHiFt KeY iS sTiCkY&quot;.to_lowercase());
}</code></pre><h1 id="750445d5-932f-4fc0-8e7e-4804a6374240" class="">Option</h1><p id="2312be11-f489-4426-971e-85754f6964de" class=""><mark class="highlight-yellow">可选值。</mark></p><figure id="a559212a-ec10-4621-9b00-470a295bd7f6" class="image"><a href="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%206.png"><img style="width:576px" src="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%206.png"/></a></figure><p id="76f05c08-88c7-4e49-b366-6d6c1cc0d178" class="">类型 <a href="https://rustwiki.org/zh-CN/std/option/enum.Option.html"><code>Option</code></a> 表示一个可选值：<mark class="highlight-yellow">每个 </mark><mark class="highlight-yellow"><a href="https://rustwiki.org/zh-CN/std/option/enum.Option.html"><code>Option</code></a></mark><mark class="highlight-yellow"> 均为 </mark><mark class="highlight-yellow"><a href="https://rustwiki.org/zh-CN/std/option/enum.Option.html#variant.Some"><code>Some</code></a></mark><mark class="highlight-yellow"> 并包含一个值</mark>，或者为 <a href="https://rustwiki.org/zh-CN/std/option/enum.Option.html#variant.None"><code>None</code></a>，但不包含。 <a href="https://rustwiki.org/zh-CN/std/option/enum.Option.html"><code>Option</code></a> 类型在 Rust 代码中非常常见，因为它们有多种用途：</p><ul id="d87f8f98-ae05-4fab-922b-07f8b2618aec" class="bulleted-list"><li style="list-style-type:disc">初始值</li></ul><ul id="39d7a61e-0022-417e-aac3-c3c052652dfa" class="bulleted-list"><li style="list-style-type:disc">未在整个输入范围内定义的函数的返回值 (部分函数)</li></ul><ul id="a34b6327-0e96-4a2d-b52e-b8c615ca370e" class="bulleted-list"><li style="list-style-type:disc">返回值，用于报告否则将报告简单错误的错误，其中错误返回 <a href="https://rustwiki.org/zh-CN/std/option/enum.Option.html#variant.None"><code>None</code></a></li></ul><ul id="8ba0bef4-b559-4749-8668-cd556576d77b" class="bulleted-list"><li style="list-style-type:disc">可选的结构体字段</li></ul><ul id="85c1ac2a-c43f-4296-a954-83fdfdf795c2" class="bulleted-list"><li style="list-style-type:disc">可借用或 “taken” 的结构体字段</li></ul><ul id="5894a3f2-de5b-4c1a-a515-5170f4385930" class="bulleted-list"><li style="list-style-type:disc">可选的函数参数</li></ul><ul id="6297df4d-8451-4473-a4ef-f1014624fa50" class="bulleted-list"><li style="list-style-type:disc">可空指针</li></ul><ul id="d3a5b879-a97a-4d15-b0c6-c50897da6768" class="bulleted-list"><li style="list-style-type:disc">从困难的情况中交换东西</li></ul><p id="432b0435-38dd-4318-a104-3b8508d979f8" class="">通常将 <a href="https://rustwiki.org/zh-CN/std/option/enum.Option.html"><code>Option</code></a> 与模式匹配配对，以查询值的存在并采取措施，始终考虑 <a href="https://rustwiki.org/zh-CN/std/option/enum.Option.html#variant.None"><code>None</code></a> 的情况。</p><pre id="8980dc0b-4c2a-4f22-b9e2-2e7ad095c535" class="code code-wrap"><code>// 返回一个Option用于error handling
fn divide(numerator: f64, denominator: f64) -&gt; Option&lt;f64&gt; {
    if denominator == 0.0 {
        None
    } else {
        Some(numerator / denominator)
    }
}

// 函数的返回值是一个选项
let result = divide(2.0, 3.0);

// 匹配result中的 Some 和 None，println！信息
// 模式匹配以获取值
match result {
    // 该划分有效
    Some(x) =&gt; println!(&quot;Result: {}&quot;, x),
    // 划分无效
    None    =&gt; println!(&quot;Cannot divide by 0&quot;),
}</code></pre><h1 id="16b32365-eb65-44de-9f00-4f456fd92278" class="">match</h1><pre id="84b61dc1-1979-47c6-9d06-be9f3485d283" class="code code-wrap"><code>pub fn total_cost(item_quantity: &amp;str) -&gt; Result&lt;i32, ParseIntError&gt; {
    let processing_fee = 1;
    let cost_per_item = 5;
    // ？ 表示如果是i32，那么Ok，如果不是，就返回一个ParseIntError
    let qty = match item_quantity.parse::&lt;i32&gt;() {
        Ok(num) =&gt; Ok(num * cost_per_item + processing_fee),
        Err(s) =&gt; Err(s),
    };

    qty
}</code></pre><p id="90b60ef6-4c25-4ecd-adcf-234754b87afa" class="">
</p><h1 id="eaa78c33-8f7c-429d-aa5d-249cd8dcbe29" class="">If let</h1><p id="c6989631-6b47-434c-a303-314c90170ab2" class="">当只需要match一种特殊情况，其他都归于另一种时，可以用if let</p><p id="4cc9323b-ad7f-4c86-ba31-83d1ed0577b9" class="">上下两个红框内代码效果一样</p><figure id="28b0de46-90fc-4247-a775-3d52f6dd2251" class="image"><a href="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%207.png"><img style="width:336px" src="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%207.png"/></a></figure><figure id="d37ad1aa-f0e1-4bc1-9244-8eb491e03ae8" class="image"><a href="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%208.png"><img style="width:336px" src="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%208.png"/></a></figure><h1 id="2e756491-c290-4f0f-928a-8dd390676726" class="">Package Crate Module</h1><h2 id="b48df502-8a6c-414b-a4b1-ba4e141fe5c9" class="">Package and Crate</h2><figure id="59fa72d7-851e-4138-8b10-f51300129c8d" class="image"><a href="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%209.png"><img style="width:384px" src="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%209.png"/></a></figure><h3 id="ade612f6-795e-40c8-abc5-1a18c6ac9de8" class="">Crate惯例</h3><figure id="27345a32-8504-4f3f-855b-1aeb4399bd7c" class="image"><a href="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2010.png"><img style="width:384px" src="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2010.png"/></a></figure><figure id="5e31f5ab-065f-44f2-8613-1396d09e112c" class="image"><a href="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2011.png"><img style="width:384px" src="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2011.png"/></a></figure><h3 id="5d8044e6-82da-4e37-a4c2-51fc5a75f9cb" class="">Crate作用</h3><figure id="492c7636-88a6-4b45-8d2a-a05b24f7287b" class="image"><a href="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2012.png"><img style="width:432px" src="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2012.png"/></a></figure><h2 id="b52d6e38-0894-40a6-9ed7-3ca44cadfc57" class="">Module</h2><figure id="de240975-f0b3-43f2-8e42-3b250daa9500" class="image"><a href="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2013.png"><img style="width:480px" src="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2013.png"/></a></figure><p id="e3149883-524b-4917-baed-cf4c3667aebc" class="">
</p><div id="4a625e00-312a-4aec-912c-04f49233e1f0" class="column-list"><div id="e5fbb964-2143-461d-9bde-a6dc1a3b5826" style="width:100%" class="column"><figure id="9e0b12a5-d47c-4468-b1e2-060cc2164ce5" class="image"><a href="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2014.png"><img style="width:982px" src="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2014.png"/></a></figure><figure id="9a56319b-ac0f-4cca-b6fc-5053f384bb4b" class="image"><a href="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2015.png"><img style="width:336px" src="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2015.png"/></a></figure><p id="5c9be779-f476-445e-b2c3-5e6b46824e0d" class="">
</p></div><div id="8ee79011-862f-4e3f-9d5e-ae906ce24ea3" style="width:100%" class="column"><p id="5d59e2b3-ad46-4aae-a0aa-938482c9a886" class="">下图的树状结构为lib.rs</p><figure id="6ca4ae55-e918-456d-ab6a-9cd87f239590" class="image"><a href="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2016.png"><img style="width:628px" src="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2016.png"/></a></figure></div></div><div><h1 id="56b3ab02-2c42-44ed-918f-f8e8abc3607e" class="">Variable shadowing</h1></div><figure id="95930cc4-32d7-4f52-bb5a-ac92509acefb"><a href="https://doc.rust-lang.org/book/ch03-01-variables-and-mutability.html#shadowing" class="bookmark source"><div class="bookmark-info"><div class="bookmark-text"><div class="bookmark-title">The Rust Programming Language</div><div class="bookmark-description">As mentioned in the &quot;Storing Values with Variables&quot; section, by default variables are immutable. This is one of many nudges Rust gives you to write your code in a way that takes advantage of the safety and easy concurrency that Rust offers. However, you still have the option to make your variables mutable.</div></div><div class="bookmark-href"><img src="https://doc.rust-lang.org/book/favicon.png" class="icon bookmark-icon"/>https://doc.rust-lang.org/book/ch03-01-variables-and-mutability.html#shadowing</div></div></a></figure><p id="e3575571-7c93-4d0d-a7fc-0318224c61fe" class="">用let关键字</p><p id="047aa57e-65f1-44a6-b66f-662dc1d34096" class="">the second variable is what the compiler will see when you use the name of the variable. In effect, the second variable overshadows the first</p><p id="7c4ad5c0-b1a5-47ad-8793-fa825d9a636f" class="">不仅可以修改变量的值，还可以修改变量的类型</p><pre id="3c10b22e-1732-48d1-8bda-405c011bc80d" class="code code-wrap"><code>fn main() {
    let x = 5;

    let x = x + 1;

    {
        let x = x * 2;
        println!(&quot;The value of x in the inner scope is: {x}&quot;);
    }

    println!(&quot;The value of x is: {x}&quot;);
}</code></pre><pre id="735bcfb2-3c03-4a81-bdd7-fb80ee14e55f" class="code code-wrap"><code>let spaces = &quot;   &quot;;
let spaces = spaces.len();</code></pre><p id="1e49ee04-5b4d-4114-b8e3-98fe1b9f13b6" class="">
</p><h1 id="ee434544-5241-4dac-bbd4-e88b359ebabe" class="">泛型</h1><figure id="9fa639e4-0a8b-42e6-b019-71edbaaf8e79" class="image"><a href="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2017.png"><img style="width:528px" src="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2017.png"/></a></figure><h2 id="31d06998-ff4e-42bc-b93e-2f92eaf8be44" class="">函数中的泛型</h2><figure id="d4c5f4b3-6dd5-46ba-adba-293a36fd969e" class="image"><a href="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2018.png"><img style="width:666px" src="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2018.png"/></a></figure><h2 id="819b3dba-707c-4459-b15e-a02c27c4b932" class="">结构体中的泛型</h2><figure id="bda652c0-b00e-4fc2-b337-31cc2abb2816" class="image"><a href="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2019.png"><img style="width:434px" src="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2019.png"/></a></figure><p id="cf9f7017-c9f5-42d3-ae58-a5389b3c4604" class="">可以声明特殊情况下的特有变量，下图中，意为只有i32类型的结构体中才会存在x1</p><figure id="41d4e499-fff4-4372-9f0c-cd8e7917a595" class="image"><a href="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2020.png"><img style="width:384px" src="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2020.png"/></a></figure><figure id="92e859de-aa38-4693-96ed-afc3f82fa8b1" class="image"><a href="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2021.png"><img style="width:384px" src="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2021.png"/></a></figure><figure id="8c439da9-dd3f-4868-849b-a089798d1e71" class="image"><a href="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2022.png"><img style="width:1236px" src="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2022.png"/></a></figure><h1 id="68cda05a-45ae-439d-aac8-f455717ec59a" class="">测试</h1><h2 id="b637dacf-96c6-4d3b-b6e5-519630824d7c" class="">assert!</h2><p id="b775a9b6-518d-432b-b031-ae9fb8b170b8" class="">assert_eq!</p><p id="2aa583b9-06f1-4fcf-b7dc-5b5d3b44a2ba" class="">assert_ne!</p><p id="8ff3f1cb-dc09-4ea3-9813-84ead6de9249" class="">
</p><h2 id="2d70f605-ec98-4bbd-97d6-76973d34ce88" class="">should_panic</h2><p id="933f694b-7bf9-45d4-ab3d-22cff112690b" class="">测试是否发生了恐慌</p><figure id="ce838362-c009-45dd-aab3-04b5ccd9af12" class="image"><a href="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2023.png"><img style="width:384px" src="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2023.png"/></a></figure><h3 id="1e144cf7-39d8-4200-96fa-538cf4be0781" class="">测试特定恐慌</h3><p id="12f888e2-1e87-4abb-9493-10f7039655e3" class="">增加expected参数</p><figure id="c8091d5c-0803-4a88-bb52-c90a816b667d" class="image"><a href="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2024.png"><img style="width:528px" src="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2024.png"/></a></figure><p id="93068cc6-f0cf-4462-b8f5-e2af8326a996" class="">将预期的恐慌与实际恐慌做比较</p><figure id="e3f741b4-cff2-48b7-a992-6fd96c0903af" class="image"><a href="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2025.png"><img style="width:576px" src="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2025.png"/></a></figure><h2 id="7222bb96-c1bb-4a1f-b149-57e7d29d1e07" class="">使用Result&lt;T, E&gt;测试</h2><p id="0ffb4d81-0b8b-4c06-8e6c-0535ebb6116d" class="">与should_panic不兼容</p><figure id="9be6c039-b3f7-43b4-8240-f23dd2d87af7" class="image"><a href="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2026.png"><img style="width:528px" src="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2026.png"/></a></figure><figure id="83a60b80-f9c4-4c23-91f8-c765e9370888" class="image"><a href="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2027.png"><img style="width:528px" src="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2027.png"/></a></figure><h2 id="bdf528d5-685d-4dbf-8dbb-7c555540835c" class="">并行运行测试</h2><figure id="e79a2f53-475f-4e56-ab57-c89851ed03d7" class="image"><a href="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2028.png"><img style="width:432px" src="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2028.png"/></a></figure><p id="7e0ac83f-e490-433c-87c1-fab383173f60" class="">指定线程数</p><figure id="6d48d5e9-245b-4e81-b859-329fca2944ca" class="image"><a href="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2029.png"><img style="width:432px" src="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2029.png"/></a></figure><h2 id="1daeb1ef-eff8-4330-bda5-22b39bb64b0b" class="">显式函数输出</h2><p id="b56e4c76-3d56-4635-8069-f8d31b64995d" class="">cargo test — —show-output</p><figure id="b21ee47d-6787-4bbe-b398-c3d6349fa797" class="image"><a href="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2030.png"><img style="width:528px" src="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2030.png"/></a></figure><h2 id="40738570-baa7-4c48-870b-e6812e7d7b6d" class="">按名称运行</h2><p id="ad0f100b-4171-45ba-ae4e-664338c6bbac" class="">指定函数名</p><pre id="db1763c0-8a91-430c-a292-1fb7d93a78e5" class="code code-wrap"><code>cargo test one_hundred</code></pre><h2 id="f7ffd774-b451-4941-af47-d47c1fe471c5" class="">忽略某些测试，运行剩余测试</h2><figure id="97023542-1db0-424b-b399-e2cc231be564" class="image"><a href="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2031.png"><img style="width:432px" src="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2031.png"/></a></figure><p id="e1a79924-21aa-4410-9f9c-1eb3848b07a0" class="">不会运行ignore属性下的函数</p><figure id="4f0c8a5d-d9cb-4e07-91fa-51c5dd163f78" class="image"><a href="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2032.png"><img style="width:480px" src="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2032.png"/></a></figure><pre id="89250f95-463d-45fd-9a1c-a8419fa15a51" class="code code-wrap"><code>cargo test -- --ignored</code></pre><h2 id="7c88b9c3-8ffc-424b-af32-ef4ec5e8bba4" class="">测试单元</h2><figure id="0fe49da2-d996-4f74-a876-0a0406348a3d" class="image"><a href="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2033.png"><img style="width:432px" src="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2033.png"/></a></figure><figure id="701eb22c-281c-49f5-b914-5a3cd0936519" class="image"><a href="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2034.png"><img style="width:432px" src="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2034.png"/></a></figure><p id="bfcdbc86-31b7-47df-abe2-d7f5efdc3473" class="">允许测试私有函数</p><figure id="018b894b-af67-4fc6-9194-144d786afb76" class="image"><a href="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2035.png"><img style="width:384px" src="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2035.png"/></a></figure><h2 id="81d99e54-14b6-4e38-984d-7329cb96ad6f" class="">集成测试</h2><p id="7e7ae914-5075-4b46-8d41-831979362a7b" class="">位于被测试库的外部</p><figure id="97fd8d12-f2ea-4887-8dcc-663665451e56" class="image"><a href="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2036.png"><img style="width:432px" src="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2036.png"/></a></figure><h3 id="4a65b855-40ea-4c70-9277-29dffd24657d" class="">test目录</h3><figure id="55bfaf82-d7d7-4216-9977-e1dbbd11cabc" class="image"><a href="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2037.png"><img style="width:480px" src="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2037.png"/></a></figure><p id="7e5f5daf-6cfc-46ff-82e9-c2ade95b1431" class="">测试lib.rs中的add_two函数</p><figure id="b3b4244e-88cd-42fe-9321-a59bc1dcde84" class="image"><a href="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2038.png"><img style="width:432px" src="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2038.png"/></a></figure><p id="20406613-a647-485e-b194-4860542ccc24" class="">在integration_test.rs中声明test区域</p><p id="cb60929a-b511-4cfa-b754-429700df8844" class="">测试lib中的add_two函数</p><figure id="3cbd7d3e-a377-4476-8427-4cc0d3985751" class="image"><a href="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2039.png"><img style="width:432px" src="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2039.png"/></a></figure><figure id="cf458c3c-4a76-459c-a62c-75151036ee4e" class="image"><a href="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2040.png"><img style="width:432px" src="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2040.png"/></a></figure><h3 id="62f723ab-cdd3-4d92-93b7-2600d173fbcb" class="">tests目录</h3><figure id="96eb2aa3-0bba-47b2-9f06-399095dcf4ce" class="image"><a href="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2041.png"><img style="width:432px" src="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2041.png"/></a></figure><p id="c665614b-c594-4b05-8d97-f0772d6e7e94" class="">不共享行为</p><figure id="e09193da-a00f-4a04-8f85-5bbb9272ded7" class="image"><a href="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2042.png"><img style="width:528px" src="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2042.png"/></a></figure><p id="ec79c452-c559-40f1-a923-8b30d7b896da" class="">common文件夹，编译为一个module，其中的函数，用于在tests下的其他crate中</p><figure id="a27d384a-3116-474f-b2b3-acfbc3bfc11b" class="image"><a href="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2043.png"><img style="width:1166px" src="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2043.png"/></a></figure><h1 id="8f981851-e742-4a2d-9696-015216895516" class="">Error handling 错误处理</h1><h3 id="bef74fd7-cadb-4b60-ab6b-aabc6bd8ab04" class="">Rustlings error handling习题的答案</h3><figure id="beb3a337-bbff-44cc-81e3-c948d4d1efcb"><a href="https://lazyren.github.io/studylog/rustlings-error-handling.html#errors5rs" class="bookmark source"><div class="bookmark-info"><div class="bookmark-text"><div class="bookmark-title">Rustlings Topic: Error Handling</div><div class="bookmark-description">Most errors aren&#x27;t serious enough to require the program to stop entirely. Sometimes, when a function fails, it&#x27;s for a reason that you can easily interpret and respond to. Please take a look at Error Handling / Generics / Result / Boxing Errors You may find solution code for the topic from my repo.</div></div><div class="bookmark-href"><img src="https://lazyren.github.io/assets/icons/favicon.ico" class="icon bookmark-icon"/>https://lazyren.github.io/studylog/rustlings-error-handling.html#errors5rs</div></div><img src="https://lazyren.github.io/assets/img/seattle.png" class="bookmark-image"/></a></figure><h2 id="d7d384c7-99b4-4d3a-8d70-f0d039963bdf" class="">Result</h2><p id="94a58399-9466-43af-a030-8b4a8ae7ebd4" class="">即返回类型为Ok(arg 1) or Err(arg 2)</p><p id="e73fa3e9-63cc-40d4-9f78-ef9197c7d811" class=""><code>Result</code> 类型的错误处理。</p><p id="602d438d-5b50-4bba-ab9e-5e26dd59997c" class=""><a href="https://rustwiki.org/zh-CN/std/result/enum.Result.html"><code>Result&lt;T, E&gt;</code></a> 是用于返回和传播错误的类型。 它是一个带有变体的枚举，<a href="https://rustwiki.org/zh-CN/std/result/enum.Result.html#variant.Ok"><code>Ok(T)</code></a>，表示成功并包含一个值，而 <a href="https://rustwiki.org/zh-CN/std/result/enum.Result.html#variant.Err"><code>Err(E)</code></a> 表示错误并包含一个错误值。</p><pre id="2c193f2a-1934-4a1a-bd44-d0139ffc98b2" class="code code-wrap"><code>enum Result&lt;T, E&gt; {
   Ok(T),
   Err(E),
}</code></pre><pre id="eb3879b9-66c3-4494-b1bd-71fdc21cf4cf" class="code code-wrap"><code>pub fn total_cost(item_quantity: &amp;str) -&gt; Result&lt;i32, ParseIntError&gt; {
    let processing_fee = 1;
    let cost_per_item = 5;
    // ？ 表示如果是i32，那么Ok，如果不是，就返回一个ParseIntError
    let qty = item_quantity.parse::&lt;i32&gt;()?;

    Ok(qty * cost_per_item + processing_fee)
}</code></pre><p id="70c273b6-5abc-4c33-9479-05e402798583" class="">例子：fn 打开某一个文件 {<div class="indented"><p id="529922b1-ee25-4723-8853-958acb489983" class="">成功 → 返回文件 {</p><p id="92081a47-7f44-4278-881b-7606416c6eec" class="">失败 → 对error.kind（类型）进行match<div class="indented"><p id="3057503a-5ad9-40a8-a8d8-c09c734134c7" class="">   → IO文件NotFound错误 ⇒ 进行文件创建（File::create）{<div class="indented"><p id="1db30393-d6df-4f2d-9004-78fdb0a8c8f5" class="">   → 文件创建成功 ⇒ 返回文件 fc</p><p id="8ad61cea-c441-44de-835a-a1533789eebf" class="">   → 文件创建失败 ⇒ panic！</p></div></p><p id="1c157c14-ae62-49b4-8c84-0239691b23dc" class="">   }</p><p id="df9569d6-fe47-4531-8ab8-032f38e26eed" class="">   → 其他IO错误 ⇒ panic! </p></div></p><p id="1a6d896d-3a93-4f9d-a457-847911d392d7" class=""> }</p></div></p><p id="95c378eb-18e8-4cc4-99be-075bc809b828" class="">}</p><p id="d0400506-73ff-4ef9-b793-bcba601bf21f" class=""><div class="indented"><p id="d3e1aa08-45c4-4cd5-821a-cb99df8f7c3f" class="">
</p></div></p><figure id="a1c867cc-4dd7-4ce0-b408-e8c464cd0f43" class="image"><a href="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2044.png"><img style="width:1612px" src="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2044.png"/></a></figure><p id="280fb271-7772-44b7-9990-1d3ec89b6ba0" class="">
</p><h2 id="a53e34e9-2f3c-4103-bdd8-45ce5cd6f03e" class="">Unwrap</h2><p id="587ff085-064b-44ea-b7da-07d956265f1c" class="">当你比编译器掌握更多信息，代码绝对不会出错</p><p id="69a6fa81-b09e-433b-89e4-2472aabe7bc2" class="">简洁化的match</p><p id="80b326da-44c8-4ffd-a573-65f07e999826" class="">直接进行一个Ok和Err的选择</p><h3 id="041e18a0-1331-4fed-8b2b-5450b6d14347" class="">?(question mark)</h3><p id="cd68ee51-b4b5-45aa-8f42-43c1569cda1a" class="">两个 ”?” 分别对应上图的两个match</p><figure id="3af9b2ce-f8f9-4939-a118-bf8a478f9b65" class="image"><a href="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2045.png"><img style="width:384px" src="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2045.png"/></a></figure><figure id="02fddba0-5e81-4336-b863-368aec67bbcb" class="image"><a href="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2046.png"><img style="width:480px" src="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2046.png"/></a></figure><p id="510c7788-b667-4ac8-8f4b-e87bd9992591" class="">from函数</p><figure id="875d2773-1c96-4921-9d7e-8e39b7ddc711" class="image"><a href="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2047.png"><img style="width:480px" src="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2047.png"/></a></figure><p id="ef9d58ce-cb4c-43cb-b77f-715ada874dea" class="">？与main()函数</p><figure id="1221b157-099a-4f11-b33e-9d674ea9b724" class="image"><a href="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2048.png"><img style="width:480px" src="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2048.png"/></a></figure><p id="99e264b4-3f75-4ffe-a60e-10972d06e2e6" class=""><mark class="highlight-red">链式调用继续优化</mark> 真夸张啊</p><figure id="3645f683-a080-4292-8f4a-62b7b4623462" class="image"><a href="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2049.png"><img style="width:1516px" src="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2049.png"/></a></figure><p id="b1e83319-5fe8-4e11-85ff-45a7f9b9116f" class=""><mark class="highlight-yellow">It must return </mark><mark class="highlight-yellow"><code>Result&lt;T, E&gt; </code></mark><mark class="highlight-yellow">to have code line like </mark><mark class="highlight-yellow"><code>let cost = total_cost(pretend_user_input)?;</code></mark></p><p id="2e6a1879-a56a-41a2-b7d7-f2c5d2dcf80c" class="">把 result 用 match 连接起来会显得很难看；幸运的是，<code>?</code> 运算符可以把这种逻辑变得 干净漂亮。<code>?</code> 运算符用在返回值为 <code>Result</code> 的表达式后面，它等同于这样一个匹配 表达式：其中 <code>Err(err)</code> 分支展开成提前返回的 <code>return Err(err)</code>，而 <code>Ok(ok)</code> 分支展开成 <code>ok</code> 表达式。
<code></code></p><pre id="4fa38100-f6c8-4813-bfb1-7eab9dc6e42c" class="code code-wrap"><code>pub fn total_cost(item_quantity: &amp;str) -&gt; Result&lt;i32, ParseIntError&gt; {
    let processing_fee = 1;
    let cost_per_item = 5;
    // ？ 表示如果是i32，那么Ok，如果不是，就返回一个ParseIntError
    let qty = item_quantity.parse::&lt;i32&gt;()?;

    Ok(qty * cost_per_item + processing_fee)
}</code></pre><h2 id="bf1f3bab-edd9-4d75-a959-a7803683626b" class="">Boxing errors</h2><p id="db19810e-6466-4165-abfb-1077bfb05f5c" class="">can hold any kind of <code>Error</code> type.</p><pre id="b3208486-6c9a-4108-bccd-5fc590b101ff" class="code code-wrap"><code>fn main() -&gt; Result&lt;(), Box&lt;dyn error::Error&gt;&gt; {
    let pretend_user_input = &quot;42&quot;;
    let x: i64 = pretend_user_input.parse()?;
    println!(&quot;output={:?}&quot;, PositiveNonzeroInteger::new(x)?);
    Ok(())
}</code></pre><h3 id="b37ba872-de8e-40ea-ad17-a795d9c5ad20" class="">dyn</h3><p id="c01d4c3b-582a-4f9b-bf73-9707662113f4" class=""><code>dyn</code>
 关键字用于突出显示在关联的 <code>Trait</code>
 上对方法的调用是动态调度的。 要以这种方式使用 trait，它必须是对象安全的。</p><p id="6e14fe4a-95f0-4408-98da-911bb78df8f1" class="">
</p><h1 id="2654d770-1087-43bf-8ace-a69d8e4a1b41" class="">closure 闭包</h1><p id="0129bb5c-eb78-415b-bd05-0ed91084725b" class="">解决函数频繁调用</p><ol type="1" id="91a60488-e6a0-49bd-93a1-820fb8967a74" class="numbered-list" start="1"><li>在所需的上下文中使用闭包，先定义函数，再调用<figure id="f3d98456-4dba-4b57-9c38-6c99547dd496" class="image"><a href="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2050.png"><img style="width:528px" src="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2050.png"/></a></figure></li></ol><ol type="1" id="35517398-5f41-40f3-bcde-c361eb6a5c6b" class="numbered-list" start="2"><li>使用范型和Fn Trait储存闭包<figure id="514e23db-877e-4291-856e-38eb1e7446cc" class="image"><a href="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2051.png"><img style="width:576px" src="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2051.png"/></a></figure><figure id="2fcd73ff-8d00-4014-a895-02fa7495e5f7" class="image"><a href="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2052.png"><img style="width:576px" src="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2052.png"/></a></figure><figure id="3c743c2b-28be-47a1-b34b-f99559c042f0" class="image" style="text-align:center"><a href="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2053.png"><img style="width:240px" src="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2053.png"/></a></figure><figure id="5d468030-0234-4925-9f25-deab2a12ad19" class="image" style="text-align:center"><a href="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2054.png"><img style="width:384px" src="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2054.png"/></a></figure><figure id="858d7007-e4fd-4ac0-a181-83f4ae6c8b7f" class="image" style="text-align:center"><a href="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2055.png"><img style="width:384px" src="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2055.png"/></a></figure><figure class="block-color-gray_background callout" style="white-space:pre-wrap;display:flex" id="ce931916-18ac-4aa4-bc92-e2bbe41e974f"><div style="font-size:1.5em"><span class="icon">❗</span></div><div style="width:100%">Some 可以简单理解为有值，非空</div></figure></li></ol><figure id="c8088686-44d0-45aa-be00-1b6df00b205c" class="image"><a href="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2056.png"><img style="width:1584px" src="Rust%20615b5e3ff7024c8090355fdba562f31a/Untitled%2056.png"/></a></figure></div></article></body></html>